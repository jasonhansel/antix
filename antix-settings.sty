% Load various TikZ libraries
\iftoggle{earlygraphics}{
\usetikzlibrary{
	positioning,
	matrix,
	arrows.meta,
	backgrounds,
	shapes.multipart,
	chains,
    automata,
	calc
}

% Useful TikZ styles
\tikzset{dot/.style={circle, fill=black}}
\tikzset{cell/.style={minimum size=0.5cm, draw=black, line width=1pt,
 text height=0.25cm,text width=0.25cm,text centered}}{}
 
}{}

% Stop xspace from adding space before quotation marks.
% This fixes, eg, "\thm", but breaks \thm "ABC"
\xspaceaddexceptions{"}


% Ignore some amsmath warnings
\makeatletter
\let\over\@@over
\let\atopwithdelims\@@atopwithdelims
\makeatother

% Change fancyvrb tab size to 4
\RecustomVerbatimEnvironment{Verbatim}{Verbatim}{tabsize=4}

% Make delimiters stretch less
\delimiterfactor=450
\delimitershortfall=5pt



% single space blockquotes
\renewenvironment{quote}
               {\setlength{\parindent}{0pt}\begin{addmargin}[4em]{0em}\begin{singlespace}}
               {\end{singlespace}\end{addmargin}}


% Lists

% Headings
\ifearlybeamer
\else
\setlist{topsep=0pt,parsep=2ex,itemsep=0pt}
\setlist[itemize]{label=$\bullet$}


    % Fix chapters
    \titleclass{\part}{straight}
    \titleclass{\chapter}{straight}[\part]

    
    \titlelabel{}
    \titlespacing{\part}{0pt}{-\baselineskip}{-0.5\baselineskip}
    \titlespacing{\chapter}{0pt}{0pt}{0pt}
    \titlespacing{\section}{0pt}{0pt}{0pt}
    \titlespacing{\subsection}{0pt}{0pt}{0pt}

    % Fix "thetitle" - see http://tex.stackexchange.com/questions/3988/
    \let\oldtitle\title
    \renewcommand{\title}[1]{\oldtitle{#1}\newcommand{\mythetitle}{#1}}


    \newcounter{chapter}
    % \renewcommand{\thechapter}{}
    \renewcommand{\chaptertitlename}{}

    \titleformat{\chapter}[block]{}{}{0pt}{\textbf}
    \titleformat{\part}[block]{\vspace{-\baselineskip}}{}{0pt}{\textbf}[]
    
    \newcommand{\bbf}[1]{\textbf{#1}}
    \titlespacing{\part}{0pt}{0pt}{0pt}

    \titleformat{\section}[runin]{}{}{0pt}{\u}[\enspace]
\fi



% Improve tikz-cd arrows
\iftoggle{earlygraphics}{
    \tikzcdset{every arrow/.append style = -{Latex[scale=1.25]}}
}{}

% Better spacing
\frenchspacing


